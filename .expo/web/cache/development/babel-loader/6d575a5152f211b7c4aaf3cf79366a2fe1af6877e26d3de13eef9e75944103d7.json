{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Touchable from \"react-native-web/dist/exports/Touchable\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport React, { useState, useEffect } from 'react';\nimport { auth, firebase } from \"../firebase\";\nimport { collection, setDoc, doc, getDoc, querySnapshot, documentSnapshot, getDocs, snapshotEqual, onSnapshot, updateDoc } from 'firebase/firestore';\nimport { db } from \"../firebase\";\nimport { getAuth } from 'firebase/auth';\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar RecieveCash = function RecieveCash() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    userInfo = _useState2[0],\n    setUserInfo = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    email = _useState4[0],\n    setEmail = _useState4[1];\n  var _useState5 = useState(),\n    _useState6 = _slicedToArray(_useState5, 2),\n    uids = _useState6[0],\n    setUid = _useState6[1];\n  var _useState7 = useState(true),\n    _useState8 = _slicedToArray(_useState7, 2),\n    isLoading = _useState8[0],\n    setIsLoading = _useState8[1];\n  var _useState9 = useState(),\n    _useState10 = _slicedToArray(_useState9, 2),\n    fullname = _useState10[0],\n    setName = _useState10[1];\n  var _useState11 = useState(),\n    _useState12 = _slicedToArray(_useState11, 2),\n    saveProfile = _useState12[0],\n    setProfile = _useState12[1];\n  useEffect(function () {\n    onAuthStateChanged(auth, function (user) {\n      if (user) {\n        var uid = user.uid;\n        setUid(uid);\n        setEmail(user.email);\n        var getWallet = function () {\n          var _ref = _asyncToGenerator(function* () {\n            var docRef = doc(db, \"users\", uid);\n            var docSnap = yield getDoc(docRef);\n            if (docSnap.exists()) {\n              console.log(\"Document data:\", docSnap.data());\n              var data = docSnap.data();\n              setUserInfo(data);\n            } else {\n              console.log(\"No such document!\");\n            }\n          });\n          return function getWallet() {\n            return _ref.apply(this, arguments);\n          };\n        }();\n        getWallet();\n      } else {\n        navigation.navigate(\"Login\");\n      }\n    });\n  }, []);\n  var editProfile = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var user = auth.currentUser.uid;\n      var uid = user.uid;\n      if (user) {\n        try {\n          var updatedData = {\n            fullname: fullname\n          };\n          var userRef = firebase.firestore().collection('users').doc(uid);\n          yield userRef.update(updatedData);\n          console.log('Profile updated successfully');\n        } catch (error) {\n          console.error('Error updating profile:', error);\n        }\n      }\n      ;\n    });\n    return function editProfile() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsxs(View, {\n      style: styles.userInfo,\n      children: [_jsxs(Text, {\n        style: styles.userId,\n        children: [\"id: \", uids]\n      }), _jsxs(Text, {\n        style: styles.balance,\n        children: [\"Current Balance: \", userInfo.wallet]\n      }), _jsxs(Text, {\n        style: styles.balance,\n        children: [\"IGN:\", userInfo.fullname]\n      }), _jsxs(Text, {\n        style: styles.balance,\n        children: [\"Phone number:\", userInfo.contact, _jsxs(View, {\n          children: [_jsx(TextInput, {\n            placeholder: \"Name\",\n            value: fullname,\n            onChangeText: setName\n          }), _jsx(Button, {\n            title: \"Save\",\n            onPress: editProfile\n          })]\n        })]\n      })]\n    })\n  });\n};\nexport default RecieveCash;\nvar styles = StyleSheet.create({\n  userInfo: {\n    marginBottom: 20\n  },\n  userId: {\n    fontSize: 28,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    marginBottom: 10,\n    color: '#333'\n  },\n  balance: {\n    fontSize: 18,\n    textAlign: 'center',\n    color: \"black\"\n  },\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#F1F3F6'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","auth","firebase","collection","setDoc","doc","getDoc","querySnapshot","documentSnapshot","getDocs","snapshotEqual","onSnapshot","updateDoc","db","getAuth","onAuthStateChanged","signOut","jsxs","_jsxs","jsx","_jsx","RecieveCash","_useState","_useState2","_slicedToArray","userInfo","setUserInfo","_useState3","_useState4","email","setEmail","_useState5","_useState6","uids","setUid","_useState7","_useState8","isLoading","setIsLoading","_useState9","_useState10","fullname","setName","_useState11","_useState12","saveProfile","setProfile","user","uid","getWallet","_ref","_asyncToGenerator","docRef","docSnap","exists","console","log","data","apply","arguments","navigation","navigate","editProfile","_ref2","currentUser","updatedData","userRef","firestore","update","error","View","style","styles","container","children","Text","userId","balance","wallet","contact","TextInput","placeholder","value","onChangeText","Button","title","onPress","StyleSheet","create","marginBottom","fontSize","fontWeight","textAlign","color","flex","justifyContent","alignItems","backgroundColor"],"sources":["C:/Users/User/asd - Copy/screens/RecieveCash.js"],"sourcesContent":["import { View, Text, FlatList,ActivityIndicator, StyleSheet,Alert, Pressable, TextInput, Button, Touchable, TouchableOpacity, KeyboardAvoidingView } from 'react-native';\r\nimport React ,{useState, useEffect} from 'react';\r\nimport { auth, firebase } from '../firebase';\r\nimport {collection, setDoc, doc, getDoc, querySnapshot, documentSnapshot, getDocs, snapshotEqual, onSnapshot, updateDoc} from 'firebase/firestore'\r\nimport { db } from '../firebase'\r\nimport { getAuth } from 'firebase/auth';\r\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\r\n\r\nconst RecieveCash = () => {\r\n    const [userInfo, setUserInfo] = useState([]);\r\n    const [email, setEmail] = useState();\r\n    const [uids, setUid] = useState();\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [fullname, setName] = useState();\r\n    const [saveProfile, setProfile] = useState();\r\n    \r\n    useEffect(() => {\r\n        onAuthStateChanged(auth, (user) => {\r\n          if (user) {\r\n            // User is signed in, see docs for a list of available properties\r\n            // https://firebase.google.com/docs/reference/js/auth.user\r\n            const uid = user.uid;\r\n            setUid(uid);\r\n            setEmail(user.email);\r\n      \r\n            const getWallet = async() => {\r\n              const docRef = doc(db, \"users\", uid);\r\n              const docSnap = await getDoc(docRef);\r\n              if (docSnap.exists()) {\r\n                console.log(\"Document data:\", docSnap.data());\r\n                const data = docSnap.data();\r\n                setUserInfo(data);\r\n              } else {\r\n                // docSnap.data() will be undefined in this case\r\n                console.log(\"No such document!\");\r\n              }\r\n            }\r\n            getWallet();\r\n\r\n            \r\n          } else {\r\n            navigation.navigate(\"Login\");\r\n          }\r\n        });\r\n        \r\n      \r\n    \r\n      }, []);\r\n\r\n// useEffect(() => {\r\n// onAuthStateChanged(auth, (user) => {\r\n//   if (user) {\r\n//     // User is signed in, see docs for a list of available properties\r\n//     // https://firebase.google.com/docs/reference/js/auth.user\r\n//     const uid = user.uid;\r\n//     setUid(uid);\r\n//     setEmail(user.email);\r\n\r\n//       const saveProfile = async () => {\r\n//         const uid  = user.uid;\r\n//         updateDoc(collection(db, \"users\", uid).doc(\"fullname\"),{\r\n\r\n//           fullname:fullname\r\n//         })\r\n//         .then(() => {\r\n//           // Data saved successfully!\r\n//         })\r\n//         .catch((error) => {\r\n//           // The write failed...\r\n//         });\r\n\r\n//       }\r\n//       saveProfile();\r\n//     }    \r\n//   })  },\r\n//       [])\r\n      // if (isLoading) {\r\n      //   return <ActivityIndicator size=\"large\" />;\r\n      // }\r\n\r\n      \r\n      \r\n       \r\n      const editProfile = async () => {\r\n        const user = auth.currentUser.uid\r\n        const uid = user.uid;\r\n          if (user) {\r\n           \r\n        try {\r\n          const updatedData = {\r\n            fullname: fullname,\r\n            \r\n          };\r\n    \r\n          const userRef = firebase.firestore().collection('users').doc(uid);//.collection(\"fullname\");\r\n    \r\n          await userRef.update(updatedData);\r\n          console.log('Profile updated successfully');\r\n        } catch (error) {\r\n          console.error('Error updating profile:', error);\r\n        }\r\n      };\r\n    \r\n    }\r\n    \r\n   \r\n     \r\n\r\n    return(\r\n        <View style={styles.container}>\r\n            <View style={styles.userInfo}>\r\n            <Text style={styles.userId }>\r\n                id: {uids}\r\n            </Text>\r\n            <Text style={styles.balance}>\r\n            Current Balance: {userInfo.wallet}\r\n            </Text>\r\n            \r\n            <Text style={styles.balance}>IGN: \r\n            {userInfo.fullname}\r\n            \r\n            </Text>\r\n            <Text style={styles.balance}>Phone number: \r\n            {userInfo.contact}\r\n\r\n            <View>\r\n      <TextInput\r\n        placeholder=\"Name\"\r\n        value={fullname}\r\n        onChangeText={setName}\r\n      />\r\n      \r\n      <Button title=\"Save\" onPress={editProfile} />\r\n    </View>\r\n            \r\n            </Text>\r\n        </View>\r\n        </View>\r\n        \r\n    )\r\n\r\n    \r\n}\r\nexport default RecieveCash\r\n\r\nconst styles = StyleSheet.create({\r\n    userInfo: {\r\n        marginBottom: 20,\r\n      },\r\n      userId: {\r\n        fontSize: 28,\r\n        fontWeight: 'bold',\r\n        textAlign: 'center',\r\n        marginBottom: 10,\r\n        color: '#333',\r\n      },\r\n      balance: {\r\n        fontSize: 18,\r\n        textAlign: 'center',\r\n        color: \"black\",\r\n      },\r\n      container: {\r\n        flex: 1,\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        backgroundColor: '#F1F3F6',\r\n      }\r\n})"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}